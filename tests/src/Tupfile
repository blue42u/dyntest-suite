include_rules

B = ../../external/boost
T = ../../external/tbb
CFLAGS = -I$(B)/install/include -I$(T)/install/include
RPATH = `realpath $(B)/install/lib`:`realpath $(T)/install/lib`
DEPS = $(B)/<build> $(T)/<build>

D = ../../latest/dyninst/install
AD = ../../annotated/dyninst/install
RD = ../../reference/dyninst/install

: micro-symtab.cpp | ../../latest/dyninst/<build> $(DEPS) |> \
  ^o Compiled %o^ c++ $(CFLAGS) -I$(D)/include -L$(D)/lib -o %o %f \
  -Wl,-rpath,`realpath $(D)/lib`:$(RPATH) -lsymtabAPI \
  |> micro-symtab
: micro-symtab.cpp | ../../annotated/dyninst/<build> $(DEPS) |> \
  ^o Compiled %o^ c++ $(CFLAGS) -I$(AD)/include -L$(AD)/lib -o %o %f \
  -Wl,-rpath,`realpath $(AD)/lib`:$(RPATH) -lsymtabAPI \
  |> micro-symtab-ann
: micro-symtab.cpp | ../../reference/dyninst/<build> $(DEPS) |> \
  ^o Compiled %o^ c++ $(CFLAGS) -I$(RD)/include -L$(RD)/lib -o %o %f \
  -Wl,-rpath,`realpath $(RD)/lib`:$(RPATH) -lsymtabAPI \
  |> micro-symtab-ref

: micro-parse.cpp | ../../latest/dyninst/<build> $(DEPS) |> \
  ^o Compiled %o^ c++ $(CFLAGS) -I$(D)/include -L$(D)/lib -o %o %f \
  -Wl,-rpath,`realpath $(D)/lib`:$(RPATH) -lparseAPI \
  |> micro-parse
: micro-parse.cpp | ../../annotated/dyninst/<build> $(DEPS) |> \
  ^o Compiled %o^ c++ $(CFLAGS) -I$(AD)/include -L$(AD)/lib -o %o %f \
  -Wl,-rpath,`realpath $(AD)/lib`:$(RPATH) -lparseAPI \
  |> micro-parse-ann
: micro-parse.cpp | ../../reference/dyninst/<build> $(DEPS) |> \
  ^o Compiled %o^ c++ $(CFLAGS) -I$(RD)/include -L$(RD)/lib -o %o %f \
  -Wl,-rpath,`realpath $(RD)/lib`:$(RPATH) -lparseAPI \
  |> micro-parse-ref
